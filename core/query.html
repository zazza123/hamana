
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../connector/file/exceptions.html">
      
      
        <link rel="next" href="column.html">
      
      
      <link rel="icon" href="../config/images/hamana-lens.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Query - hamana</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../config/css/mkdocstrings.css">
    
      <link rel="stylesheet" href="../config/css/nav.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="lime" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#query" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="hamana" class="md-header__button md-logo" aria-label="hamana" data-md-component="logo">
      
  <img src="../config/images/hamana-head.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            hamana
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Query
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="lime" data-md-color-accent="indigo"  aria-label="Switch to Dark Mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to Dark Mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.768 3.96zl-.002-.005a9 9 0 0 0-.218-.779c-.13-.394.21-.8.602-.67q.435.144.855.328l.01.005A10.002 10.002 0 0 1 12 22a10 10 0 0 1-9.162-5.985l-.004-.01a10 10 0 0 1-.329-.855c-.13-.392.277-.732.67-.602q.386.126.78.218l.004.002A9 9 0 0 0 14.999 6a9 9 0 0 0-.231-2.04M16.5 6c0 5.799-4.701 10.5-10.5 10.5q-.64 0-1.26-.075A8.5 8.5 0 1 0 16.425 4.74q.075.62.075 1.259Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="brown" data-md-color-accent="indigo"  aria-label="Switch to Light Mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to Light Mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14m0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 1 0 0 11m-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0M3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06M12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0M4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12m8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20m12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12m-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.75.75 0 0 1-.018 1.042.75.75 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061m2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/zazza123/hamana" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    zazza123/hamana
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../usage.html" class="md-tabs__link">
        
  
  
    
  
  Usage

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../connector/db/index.html" class="md-tabs__link">
          
  
  
    
  
  Connectors

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="query.html" class="md-tabs__link">
          
  
  
    
  
  Core

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="hamana" class="md-nav__button md-logo" aria-label="hamana" data-md-component="logo">
      
  <img src="../config/images/hamana-head.png" alt="logo">

    </a>
    hamana
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zazza123/hamana" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    zazza123/hamana
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../connector/db/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Database
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/db/hamana.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hamana
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/db/oracle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Oracle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/db/sqlite.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQLite
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/db/teradata.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teradata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/db/exceptions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../connector/file/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    File
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            File
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/file/csv.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector/file/exceptions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Query
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="query.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Query
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#examples" class="md-nav__link">
        <span class="md-ellipsis">
            Examples
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>
      
        <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#api" class="md-nav__link">
        <span class="md-ellipsis">
            API
        </span>
    </a>

    <!-- Table of contents list -->
    
    <nav class="md-nav" aria-label="API">
        <ul class="md-nav__list">
            
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Query
        </span>
    </a>

    <!-- Table of contents list -->
    
    <nav class="md-nav" aria-label=" Query">
        <ul class="md-nav__list">
            
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.params" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.columns" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;columns
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.flag_executed" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;flag_executed
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.result" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;result
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_params" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_params
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.to_sqlite" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_sqlite
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_insert_query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_insert_query
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_create_query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_create_query
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_column_names" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_column_names
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.adjust_df" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;adjust_df
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>   </ul>
    </nav>
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.QueryParam" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;QueryParam
        </span>
    </a>

    <!-- Table of contents list -->
    
    <nav class="md-nav" aria-label=" QueryParam">
        <ul class="md-nav__list">
            
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.QueryParam.name" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.QueryParam.value" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;value
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>   </ul>
    </nav>
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.TColumn" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;TColumn
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>   </ul>
    </nav>
    
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="column.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Column
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#examples" class="md-nav__link">
        <span class="md-ellipsis">
            Examples
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>
      
        <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#api" class="md-nav__link">
        <span class="md-ellipsis">
            API
        </span>
    </a>

    <!-- Table of contents list -->
    
    <nav class="md-nav" aria-label="API">
        <ul class="md-nav__list">
            
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Query
        </span>
    </a>

    <!-- Table of contents list -->
    
    <nav class="md-nav" aria-label=" Query">
        <ul class="md-nav__list">
            
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;query
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.params" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;params
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.columns" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;columns
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.flag_executed" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;flag_executed
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.result" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;result
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_params" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_params
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.to_sqlite" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_sqlite
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_insert_query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_insert_query
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_create_query" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_create_query
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.get_column_names" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_column_names
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.Query.adjust_df" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;adjust_df
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>   </ul>
    </nav>
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.QueryParam" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;QueryParam
        </span>
    </a>

    <!-- Table of contents list -->
    
    <nav class="md-nav" aria-label=" QueryParam">
        <ul class="md-nav__list">
            
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.QueryParam.name" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;name
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.QueryParam.value" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;value
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>   </ul>
    </nav>
    
</li>  
             <!-- Solution suggested in https://github.com/squidfunk/mkdocs-material/issues/4827 -->
<li class="md-nav__item">
    <a href="#hamana.connector.db.query.TColumn" class="md-nav__link">
        <span class="md-ellipsis">
            <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;TColumn
        </span>
    </a>

    <!-- Table of contents list -->
    
</li>   </ul>
    </nav>
    
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="query">Query<a class="headerlink" href="#query" title="Permanent link">&para;</a></h1>
<p>The <code>hamana</code> library provides many classes to extract data from different sources, the <code>Query</code> class was introduced to provide a common interface to interact with these classes (connectors) or with the extracted data.</p>
<p>For example, when dealing with <a href="../connector/db/index.html">Database</a> connectors, it can be used to execute SQL queries, while for <a href="../connector/file/index.html">File</a> connectors, it is used to manage the extracted data. In addition, <code>Query</code> objects are natively connected with <code>hamana</code> internal database and can be used to perform operations on the extracted data.</p>
<p>Due to its frequent use, the <code>Query</code> class is available in the <code>hamana</code> module, so it can be imported directly from there. See all details in the <a href="#api">API</a> section.</p>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<p>This example shows how to use the <code>Query</code> class to execute a SQL query on an in-memory database.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">hamana</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">hm</span>

<span class="c1"># connect to in-memory database</span>
<span class="n">hm</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c1"># define and execute a query</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">hm</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM customers&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span><span class="o">.</span><span class="n">reults</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>

<span class="c1"># close connection</span>
<span class="n">hm</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</code></pre></div>
<p>This other example shows how to use the <code>Query</code> class to manage the extracted data from a CSV file.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">hamana</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">hm</span>

<span class="c1"># connect to CSV file</span>
<span class="n">customers_csv</span> <span class="o">=</span> <span class="n">hm</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">CSV</span><span class="p">(</span><span class="s2">&quot;customers.csv&quot;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">customers_csv</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>

<span class="c1"># check results</span>
<span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
</code></pre></div>
<h2 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h3 id="hamana.connector.db.query.Query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">hamana.connector.db.query.Query</span>


<a href="#hamana.connector.db.query.Query" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Query</span><span class="p">(</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TColumn</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">params</span><span class="p">:</span> <span class="p">(</span>
        <span class="nb">list</span><span class="p">[</span><span class="n">QueryParam</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ParamValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<a class="autorefs autorefs-internal" title="            hamana.connector.db.query.TColumn


  
      module-attribute
  " href="#hamana.connector.db.query.TColumn">TColumn</a>]</code></p>


        <p>Class to represent a query object.</p>








                  <details class="quote">
                    <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TColumn</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">params</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">QueryParam</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ParamValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

    <span class="c1"># setup query</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;loading query from file: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">QueryInitializationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;loading query from file: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.Query.query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">query</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.Query.query" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">query</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Query to be executed in the database. It is possible to provide directly the 
SQL query as a string or to load it from a file by providing the file path.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.Query.params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">params</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.Query.params" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">params</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">QueryParam</span><span class="p">]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ParamValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
    <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>List of parameters used in the query. 
The parameters are replaced by their values when the query is executed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.Query.columns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">columns</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.Query.columns" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">columns</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TColumn</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Definition of the columns returned by the query. 
The columns are used to map the query result to the application data.
If not provided, then the columns are inferred from the result.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.Query.flag_executed" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">flag_executed</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.Query.flag_executed" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">flag_executed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Flag to indicate if the query has been executed.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.Query.result" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">result</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

<a href="#hamana.connector.db.query.Query.result" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">result</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Result of the query execution. 
The result is a <code>pandas.DataFrame</code> with columns
equals the ones defined in the <code>columns</code> attribute, 
or inferred from the extraction.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="hamana.connector.db.exceptions.QueryResultNotAvailable">QueryResultNotAvailable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if no result is available; e.g., the query has not been executed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="hamana.connector.db.query.Query.get_params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_params</span>


<a href="#hamana.connector.db.query.Query.get_params" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_params</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ParamValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the query parameters as a dictionary.
Returns <code>None</code> if there are no parameters.</p>


            <details class="quote">
              <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ParamValue</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the query parameters as a dictionary.</span>
<span class="sd">        Returns `None` if there are no parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">_params</span> <span class="o">=</span> <span class="p">{</span><span class="n">param</span><span class="o">.</span><span class="n">name</span> <span class="p">:</span> <span class="n">param</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span>
    <span class="k">return</span> <span class="n">_params</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="hamana.connector.db.query.Query.to_sqlite" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_sqlite</span>


<a href="#hamana.connector.db.query.Query.to_sqlite" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_sqlite</span><span class="p">(</span>
    <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">mode</span><span class="p">:</span> <span class="n">SQLiteDataImportMode</span> <span class="o">=</span> <span class="n">SQLiteDataImportMode</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This function is used to insert the query result into a 
table hosted on the <code>hamana</code> internal database (<code>HamanaConnector</code>).</p>
<p>The <code>hamana</code> db is a SQLite database, for this reason 
<code>bool</code>, <code>datetime</code> and <code>timestamp</code> data types are <strong>not</strong> supported.
If some of the columns are defined with these data types, 
then the method performs an automatic conversion to a SQLite data type.</p>
<p>In particular, the conversions are:</p>
<ul>
<li><code>bool</code> columns are mapped to <code>INTEGER</code> data type, with the values 
<code>True</code> and <code>False</code> converted to <code>1</code> and <code>0</code>.</li>
<li><code>date</code> and <code>datetime</code> columns are mapped to <code>INTEGER</code> datatype, with the values 
    converted to an int number using the following format: <code>YYYYMMDDHHmmss</code>
    for <code>dateitme</code>, <code>YYYYMMDD</code> for <code>date</code>.</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the table to create into the database.
By assumption, the table's name is converted to uppercase.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mode</code>
            </td>
            <td>
                  <code><span title="hamana.connector.db.schema.SQLiteDataImportMode">SQLiteDataImportMode</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mode of importing the data into the database.</p>
              </div>
            </td>
            <td>
                  <code><span title="hamana.connector.db.schema.SQLiteDataImportMode">SQLiteDataImportMode</span>.<span title="hamana.connector.db.schema.SQLiteDataImportMode.REPLACE">REPLACE</span></code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_sqlite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">SQLiteDataImportMode</span> <span class="o">=</span> <span class="n">SQLiteDataImportMode</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function is used to insert the query result into a </span>
<span class="sd">        table hosted on the `hamana` internal database (`HamanaConnector`).</span>

<span class="sd">        The `hamana` db is a SQLite database, for this reason </span>
<span class="sd">        `bool`, `datetime` and `timestamp` data types are **not** supported.</span>
<span class="sd">        If some of the columns are defined with these data types, </span>
<span class="sd">        then the method performs an automatic conversion to a SQLite data type.</span>

<span class="sd">        In particular, the conversions are:</span>

<span class="sd">        - `bool` columns are mapped to `INTEGER` data type, with the values </span>
<span class="sd">        `True` and `False` converted to `1` and `0`.</span>
<span class="sd">        - `date` and `datetime` columns are mapped to `INTEGER` datatype, with the values </span>
<span class="sd">            converted to an int number using the following format: `YYYYMMDDHHmmss`</span>
<span class="sd">            for `dateitme`, `YYYYMMDD` for `date`.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            table_name: name of the table to create into the database.</span>
<span class="sd">                By assumption, the table&#39;s name is converted to uppercase.</span>
<span class="sd">            mode: mode of importing the data into the database.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
    <span class="n">df_insert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># set dtype</span>
    <span class="n">columns_dtypes</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">columns_dtypes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">columns_dtypes</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">DataType</span><span class="o">.</span><span class="n">to_sqlite</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

            <span class="c1"># convert columns</span>
            <span class="k">match</span> <span class="n">column</span><span class="o">.</span><span class="n">dtype</span><span class="p">:</span>
                <span class="k">case</span> <span class="n">DataType</span><span class="o">.</span><span class="n">BOOLEAN</span><span class="p">:</span>
                    <span class="n">df_insert</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_insert</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
                <span class="k">case</span> <span class="n">DataType</span><span class="o">.</span><span class="n">DATE</span><span class="p">:</span>
                    <span class="n">df_insert</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_insert</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
                <span class="k">case</span> <span class="n">DataType</span><span class="o">.</span><span class="n">DATETIME</span><span class="p">:</span>
                    <span class="n">df_insert</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_insert</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="c1"># import internal database</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">.hamana</span><span class="w"> </span><span class="kn">import</span> <span class="n">HamanaConnector</span>

    <span class="c1"># get instance</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">HamanaConnector</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>

    <span class="c1"># insert data</span>
    <span class="n">table_name_upper</span> <span class="o">=</span> <span class="n">table_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">db</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;inserting data into table </span><span class="si">{</span><span class="n">table_name_upper</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;mode: </span><span class="si">{</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">df_insert</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">table_name_upper</span><span class="p">,</span>
                <span class="n">con</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connection</span><span class="p">,</span>
                <span class="n">if_exists</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">dtype</span> <span class="o">=</span> <span class="n">columns_dtypes</span><span class="p">,</span>
                <span class="n">index</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;data inserted into table </span><span class="si">{</span><span class="n">table_name_upper</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;error inserting data into table </span><span class="si">{</span><span class="n">table_name_upper</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">e</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="hamana.connector.db.query.Query.get_insert_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_insert_query</span>


<a href="#hamana.connector.db.query.Query.get_insert_query" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_insert_query</span><span class="p">(</span><span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This function returns a query to insert the query result into a table.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the table to insert the data.
By assumption, the table's name is converted to uppercase.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>query to insert the data into the table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_insert_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a query to insert the query result into a table.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            table_name: name of the table to insert the data.</span>
<span class="sd">                By assumption, the table&#39;s name is converted to uppercase.</span>

<span class="sd">        Returns:</span>
<span class="sd">            query to insert the data into the table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>

    <span class="c1"># check columns availablity</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">QueryColumnsNotAvailable</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>

    <span class="c1"># get columns</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">column</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;columns string created&quot;</span><span class="p">)</span>

    <span class="c1"># get values</span>
    <span class="n">values</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;?&quot;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;values string created&quot;</span><span class="p">)</span>

    <span class="c1"># build query</span>
    <span class="n">table_name_upper</span> <span class="o">=</span> <span class="n">table_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;INSERT INTO </span><span class="si">{</span><span class="n">table_name_upper</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2">) VALUES (</span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">)&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;query to insert data into table </span><span class="si">{</span><span class="n">table_name_upper</span><span class="si">}</span><span class="s2"> created&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="hamana.connector.db.query.Query.get_create_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_create_query</span>


<a href="#hamana.connector.db.query.Query.get_create_query" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_create_query</span><span class="p">(</span><span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This function returns a query to create a table based on the query result.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>table_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the table to be created.
By assumption, the table's name is converted to uppercase.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>query to create the table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_create_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a query to create a table based on the query result.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            table_name: name of the table to be created.</span>
<span class="sd">                By assumption, the table&#39;s name is converted to uppercase.</span>

<span class="sd">        Returns:</span>
<span class="sd">            query to create the table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>

    <span class="c1"># check columns availablity</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">QueryColumnsNotAvailable</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>

    <span class="c1"># build query</span>
    <span class="n">table_name_upper</span> <span class="o">=</span> <span class="n">table_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;CREATE TABLE &quot;</span> <span class="o">+</span> <span class="n">table_name_upper</span> <span class="o">+</span> <span class="s2">&quot; (</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
            <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">DataType</span><span class="o">.</span><span class="n">to_sqlite</span><span class="p">(</span><span class="n">column</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">])</span> <span class="o">+</span> \
            <span class="s2">&quot;)&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;query to create table </span><span class="si">{</span><span class="n">table_name_upper</span><span class="si">}</span><span class="s2"> created&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="hamana.connector.db.query.Query.get_column_names" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_column_names</span>


<a href="#hamana.connector.db.query.Query.get_column_names" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_column_names</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This function returns the column names of the query.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of column names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_column_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns the column names of the query.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of column names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>

    <span class="c1"># check columns availablity</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">QueryColumnsNotAvailable</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">columns</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="hamana.connector.db.query.Query.adjust_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">adjust_df</span>


<a href="#hamana.connector.db.query.Query.adjust_df" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">adjust_df</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This function is used to adjust a <code>pandas.DataFrame</code> (usually 
the result of a query) based on the columns provided.</p>
<p>The function re-orders the columns of the <code>DataFrame</code> 
and checks the data types; if they do not match, then 
the function will try to convert the requested one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>df</code>
            </td>
            <td>
                  <code><span title="pandas">pd</span>.<span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame to adjust</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="hamana.connector.db.exceptions.QueryColumnsNotAvailable">QueryColumnsNotAvailable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if the columns do not match between the query and the result.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="hamana.connector.db.exceptions.ColumnDataTypeConversionError">ColumnDataTypeConversionError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if there is an error during the data type conversion.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/hamana/connector/db/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">adjust_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function is used to adjust a `pandas.DataFrame` (usually </span>
<span class="sd">        the result of a query) based on the columns provided.</span>

<span class="sd">        The function re-orders the columns of the `DataFrame` </span>
<span class="sd">        and checks the data types; if they do not match, then </span>
<span class="sd">        the function will try to convert the requested one.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            df: DataFrame to adjust</span>

<span class="sd">        Raises:</span>
<span class="sd">            QueryColumnsNotAvailable: if the columns do not match between the query and the result.</span>
<span class="sd">            ColumnDataTypeConversionError: if there is an error during the data type conversion.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>

    <span class="c1"># check columns availablity</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">QueryColumnsNotAvailable</span><span class="p">(</span><span class="s2">&quot;no columns available&quot;</span><span class="p">)</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span>

    <span class="c1"># get columns</span>
    <span class="n">columns_query</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">columns_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;get query columns ordered&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">columns</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="n">col</span><span class="o">.</span><span class="n">order</span> <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">order</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">columns_query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># check columns_query is a subset of columns_df</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">columns_query</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">columns_df</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;columns do not match between query and resuls&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">QueryColumnsNotAvailable</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;columns do not match </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">columns_query</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">columns_df</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># re-order</span>
    <span class="k">if</span> <span class="n">columns_query</span> <span class="o">!=</span> <span class="n">columns_df</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;re-ordering columns&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;order &gt; </span><span class="si">{</span><span class="n">columns_query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="n">columns_query</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;columns already in the correct order&quot;</span><span class="p">)</span>

    <span class="c1"># check data types</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;check data types&quot;</span><span class="p">)</span>
    <span class="n">dtypes_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>

        <span class="n">dtype_query</span> <span class="o">=</span> <span class="n">column</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">dtype_df</span> <span class="o">=</span> <span class="n">DataType</span><span class="o">.</span><span class="n">from_pandas</span><span class="p">(</span><span class="n">dtypes_df</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column: </span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;datatype (query): </span><span class="si">{</span><span class="n">dtype_query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;datatype (df): </span><span class="si">{</span><span class="n">dtype_df</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dtype_query</span> <span class="o">!=</span> <span class="n">dtype_df</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;different datatype for &#39;</span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; column -&gt; (query) </span><span class="si">{</span><span class="n">dtype_query</span><span class="si">}</span><span class="s2"> != (df) </span><span class="si">{</span><span class="n">dtype_df</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">parser</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;no parser available for </span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (order: </span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">order</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;skip column&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">column</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">pandas</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ERROR: on datatype change&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">ColumnDataTypeConversionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: on datatype change for </span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (order: </span><span class="si">{</span><span class="n">column</span><span class="o">.</span><span class="n">order</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="hamana.connector.db.query.QueryParam" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">hamana.connector.db.query.QueryParam</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#hamana.connector.db.query.QueryParam" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">QueryParam</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">ParamValue</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">


        <p>Class to represent a parameter used in a query.<br />
A parameter is represented by a name and its value.</p>
<p>Usually, parameters are used to define general query conditions 
and are replaced by the actual values when the query is executed.</p>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.QueryParam.name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.QueryParam.name" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Name of the parameter.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="hamana.connector.db.query.QueryParam.value" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">value</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.QueryParam.value" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">value</span><span class="p">:</span> <span class="n">ParamValue</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Value of the parameter.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="hamana.connector.db.query.TColumn" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">hamana.connector.db.query.TColumn</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#hamana.connector.db.query.TColumn" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TColumn</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TColumn&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Column</span><span class="p">,</span> <span class="n">covariant</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../connector/file/exceptions.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Exceptions">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Exceptions
              </div>
            </div>
          </a>
        
        
          
          <a href="column.html" class="md-footer__link md-footer__link--next" aria-label="Next: Column">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Column
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://www.instagram.com/gaiaparte/" target="_blank" rel="noopener" title="Illustrations by" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.top", "navigation.indexes", "navigation.footer", "toc.follow", "search.suggest", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>